#include <GL/glut.h>
#include <cmath>

const float PI = 3.142f;

void drawCircleOutline(float cx, float cy, float r, int num_segments) {
    glBegin(GL_LINE_LOOP);
    for (int i = 0; i < num_segments; i++) {
        float theta = 2.0f * PI * float(i) / float(num_segments);
        float x = r * cosf(theta);
        float y = r * sinf(theta);
        glVertex2f(x + cx, y + cy);
    }
    glEnd();
}

void drawFilledCircle(float cx, float cy, float r, int num_segments) {
    glBegin(GL_TRIANGLE_FAN);
        glVertex2f(cx, cy);
        for (int i = 0; i <= num_segments; i++) {
            float theta = 2.0f * PI * float(i) / float(num_segments);
            float x = r * cosf(theta);
            float y = r * sinf(theta);
            glVertex2f(x + cx, y + cy);
        }
    glEnd();
}

void display() {
    glClear(GL_COLOR_BUFFER_BIT);
    glLineWidth(2.0);

    glColor3f(0.0, 0.0, 0.0);
    drawCircleOutline(100, 250, 50, 100);

    drawFilledCircle(85, 265, 5, 50);
    drawFilledCircle(115, 265, 5, 50);

    glPointSize(3.0);
    glBegin(GL_POINTS);
        glVertex2f(100, 230);
    glEnd();

    drawCircleOutline(80, 315, 15, 50);
    glBegin(GL_LINES);
        glVertex2f(80, 300);
        glVertex2f(80, 280);
    glEnd();

    drawCircleOutline(120, 315, 15, 50);
    glBegin(GL_LINES);
        glVertex2f(120, 300);
        glVertex2f(120, 280);
    glEnd();

    float segment_radius = 50;
    float segment_overlap = 15;
    float start_x = 100 + segment_radius + segment_overlap;

    glColor3f(0.0, 0.0, 0.0);
    drawCircleOutline(start_x, 250, segment_radius, 100);

    glColor3f(1.0, 0.0, 0.0);
    drawCircleOutline(start_x + (segment_radius * 2 - segment_overlap), 250, segment_radius, 100);
    drawCircleOutline(start_x + 2 * (segment_radius * 2 - segment_overlap), 250, segment_radius, 100);
    drawCircleOutline(start_x + 3 * (segment_radius * 2 - segment_overlap), 250, segment_radius, 100);

    glFlush();
}

void init() {
    glClearColor(1.0, 1.0, 1.0, 1.0);
    gluOrtho2D(0, 600, 0, 500);
}

int main(int argc, char** argv) {
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(600, 500);
    glutInitWindowPosition(100, 100);
    glutCreateWindow("Caterpillar Symbol");
    init();
    glutDisplayFunc(display);
    glutMainLoop();
    return 0;
}

#include <GL/glut.h>
#include <cmath>

void setPixel(int x,int y){
    glBegin(GL_POINTS);
    glVertex2i(x,y);
    glEnd();
}

void drawLine(int x1,int y1,int x2,int y2){
    int dx=abs(x2-x1), dy=abs(y2-y1);
    int sx=(x2>x1)?1:-1;
    int sy=(y2>y1)?1:-1;
    int err = dx - dy;

    while(true){
        setPixel(x1,y1);
        if(x1==x2 && y1==y2) break;

        int e2 = 2*err;
        if(e2 > -dy){ err -= dy; x1 += sx; }
        if(e2 <  dx){ err += dx; y1 += sy; }
    }
}

void display(){
    glClear(GL_COLOR_BUFFER_BIT);

    drawLine(100,100,300,100);
    drawLine(300,100,300,250);
    drawLine(300,250,100,250);
    drawLine(100,250,100,100);

    glFlush();
}

void init(){
    gluOrtho2D(0,500,0,500);
}

int main(int argc,char** argv){
    glutInit(&argc,argv);
    glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);
    glutInitWindowSize(600,600);
    glutCreateWindow("Bresenham Rectangle");
    init();
    glutDisplayFunc(display);
    glutMainLoop();
}
